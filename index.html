<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OladojaPhilosophy — Academic Repository</title>
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --ink: #14100a;
    --paper: #f6f1e7;
    --cream: #ede6d2;
    --gold: #b8860b;
    --gold-light: #d4a832;
    --rust: #8b3a0f;
    --sage: #3d5c40;
    --border: #ccc2aa;
    --muted: #7a6e5a;
    --white: #fff;
  }

  html { scroll-behavior: smooth; }
  body {
    background: var(--paper);
    color: var(--ink);
    font-family: 'EB Garamond', Georgia, serif;
    min-height: 100vh;
    font-size: 16px;
  }

  /* ── HEADER ── */
  header {
    background: var(--ink);
    color: var(--paper);
    padding: 0 1.5rem;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 2px solid var(--gold);
    position: sticky;
    top: 0;
    z-index: 200;
  }
  .brand { display: flex; align-items: baseline; gap: 0.6rem; }
  .brand-name { font-size: 1.2rem; font-weight: 600; letter-spacing: 0.02em; }
  .brand-sub {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--gold-light);
    letter-spacing: 0.14em;
    text-transform: uppercase;
  }
  .header-right { display: flex; align-items: center; gap: 0.5rem; }
  .admin-btn {
    background: none;
    border: 1px solid rgba(255,255,255,0.25);
    color: var(--paper);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 0.4rem 0.8rem;
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s;
  }
  .admin-btn:hover { background: rgba(255,255,255,0.08); border-color: var(--gold); }
  .admin-btn.active { background: var(--gold); border-color: var(--gold); color: var(--ink); }

  /* ── HERO ── */
  .hero {
    background: var(--ink);
    color: var(--paper);
    padding: 3rem 1.5rem 2.5rem;
    border-bottom: 1px solid var(--gold);
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '◈';
    position: absolute;
    right: -1rem;
    top: -1rem;
    font-size: 10rem;
    color: rgba(184,134,11,0.07);
    line-height: 1;
    pointer-events: none;
  }
  .hero h1 {
    font-size: clamp(1.6rem, 5vw, 2.4rem);
    font-weight: 500;
    line-height: 1.15;
    margin-bottom: 0.6rem;
  }
  .hero p {
    font-style: italic;
    color: rgba(246,241,231,0.65);
    font-size: 0.95rem;
    max-width: 520px;
    line-height: 1.6;
  }
  .hero-stats {
    display: flex;
    gap: 2rem;
    margin-top: 1.5rem;
  }
  .stat { }
  .stat-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.4rem;
    color: var(--gold-light);
    display: block;
  }
  .stat-label {
    font-size: 0.78rem;
    color: rgba(246,241,231,0.5);
    font-style: italic;
  }

  /* ── SEARCH + FILTER ── */
  .controls {
    padding: 1.25rem 1.5rem;
    background: var(--cream);
    border-bottom: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  .search-wrap { position: relative; }
  .search-icon {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    font-size: 0.9rem;
    pointer-events: none;
  }
  #searchInput {
    width: 100%;
    background: var(--white);
    border: 1px solid var(--border);
    padding: 0.65rem 0.9rem 0.65rem 2.25rem;
    font-family: 'EB Garamond', serif;
    font-size: 1rem;
    color: var(--ink);
    outline: none;
    transition: border-color 0.15s;
  }
  #searchInput:focus { border-color: var(--gold); }
  #searchInput::placeholder { color: var(--muted); font-style: italic; }

  .cats {
    display: flex;
    gap: 0.4rem;
    flex-wrap: wrap;
  }
  .cat-pill {
    background: none;
    border: 1px solid var(--border);
    padding: 0.3rem 0.75rem;
    font-family: 'EB Garamond', serif;
    font-size: 0.82rem;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s;
    border-radius: 20px;
  }
  .cat-pill:hover { border-color: var(--gold); color: var(--ink); }
  .cat-pill.active { background: var(--ink); border-color: var(--ink); color: var(--paper); }

  /* ── MAIN ── */
  main { padding: 1.5rem; }

  .results-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    color: var(--muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  /* ── WORKS GRID ── */
  .works-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }

  .work-card {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    transition: border-color 0.15s, box-shadow 0.15s;
    position: relative;
    overflow: hidden;
    animation: fadeUp 0.3s ease both;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .work-card::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 2px;
    background: var(--gold);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.2s;
  }
  .work-card:hover { border-color: var(--gold); box-shadow: 0 4px 18px rgba(0,0,0,0.07); }
  .work-card:hover::after { transform: scaleX(1); }

  .card-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 0.5rem; }
  .badges { display: flex; gap: 0.35rem; flex-wrap: wrap; }
  .badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    padding: 0.15rem 0.45rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }
  .badge-type { background: var(--ink); color: var(--paper); }
  .badge-file { background: var(--cream); color: var(--muted); border: 1px solid var(--border); }
  .card-date { font-family: 'JetBrains Mono', monospace; font-size: 0.62rem; color: var(--muted); white-space: nowrap; }

  .card-title { font-size: 1rem; font-weight: 500; line-height: 1.35; color: var(--ink); }
  .card-desc {
    font-size: 0.85rem; color: var(--muted); line-height: 1.55; font-style: italic;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
  }

  .card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
  .card-cat { font-size: 0.8rem; color: var(--sage); display: flex; align-items: center; gap: 0.3rem; }
  .download-btn {
    background: var(--ink);
    color: var(--paper);
    border: none;
    padding: 0.4rem 0.9rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    transition: background 0.15s;
  }
  .download-btn:hover { background: var(--rust); }

  /* tags */
  .card-tags { display: flex; gap: 0.3rem; flex-wrap: wrap; }
  .tag {
    font-size: 0.72rem; color: var(--muted);
    background: var(--cream); padding: 0.1rem 0.4rem; border-radius: 2px;
  }

  /* ── EMPTY STATE ── */
  .empty {
    text-align: center;
    padding: 4rem 1rem;
    color: var(--muted);
    grid-column: 1 / -1;
  }
  .empty-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
  .empty-text { font-style: italic; font-size: 1rem; }

  /* ── MODAL OVERLAY ── */
  .overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(20,16,10,0.7);
    z-index: 500;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }
  .overlay.open { display: flex; }

  .modal {
    background: var(--paper);
    border: 1px solid var(--border);
    border-top: 3px solid var(--gold);
    width: 100%;
    max-width: 480px;
    max-height: 90vh;
    overflow-y: auto;
    padding: 2rem 1.5rem;
    position: relative;
    animation: slideIn 0.2s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-16px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .modal-close {
    position: absolute; top: 1rem; right: 1rem;
    background: none; border: none; font-size: 1.2rem;
    cursor: pointer; color: var(--muted); line-height: 1;
  }
  .modal-close:hover { color: var(--ink); }
  .modal-title {
    font-size: 1.2rem; font-weight: 500; margin-bottom: 0.25rem;
  }
  .modal-sub {
    font-size: 0.85rem; color: var(--muted); font-style: italic; margin-bottom: 1.5rem;
    padding-bottom: 1.25rem; border-bottom: 1px solid var(--border);
  }

  /* ── FORM ── */
  .form-group { margin-bottom: 1.1rem; }
  .form-label {
    display: block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 0.35rem;
  }
  .form-input, .form-select, .form-textarea {
    width: 100%;
    background: var(--white);
    border: 1px solid var(--border);
    padding: 0.6rem 0.85rem;
    font-family: 'EB Garamond', serif;
    font-size: 1rem;
    color: var(--ink);
    outline: none;
    transition: border-color 0.15s;
    appearance: none;
  }
  .form-input:focus, .form-select:focus, .form-textarea:focus { border-color: var(--gold); }
  .form-textarea { min-height: 80px; resize: vertical; }
  .form-hint { font-size: 0.75rem; color: var(--muted); font-style: italic; margin-top: 0.3rem; }

  .submit-btn {
    width: 100%;
    background: var(--ink);
    color: var(--paper);
    border: none;
    padding: 0.8rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    cursor: pointer;
    margin-top: 0.5rem;
    transition: background 0.15s;
  }
  .submit-btn:hover { background: var(--rust); }

  .msg {
    padding: 0.65rem 0.9rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    margin-bottom: 1rem;
    display: none;
  }
  .msg.error { background: #fdf0ee; border: 1px solid #e8b4a8; color: var(--rust); display: block; }
  .msg.success { background: #eef5ef; border: 1px solid #a8c8aa; color: var(--sage); display: block; }

  /* ── PASSWORD MODAL ── */
  #pwModal .modal-title { margin-bottom: 1rem; }

  /* ── FOOTER ── */
  footer {
    text-align: center;
    padding: 2rem 1rem;
    border-top: 1px solid var(--border);
    font-size: 0.8rem;
    color: var(--muted);
    font-style: italic;
    margin-top: 2rem;
  }

  /* ── RESPONSIVE ── */
  @media (min-width: 640px) {
    .hero { padding: 3.5rem 2.5rem 3rem; }
    .controls { padding: 1.25rem 2.5rem; flex-direction: row; align-items: center; }
    .search-wrap { flex: 1; }
    main { padding: 2rem 2.5rem; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="brand">
    <span class="brand-name">OladojaPhilosophy</span>
    <span class="brand-sub">Academic Repository</span>
  </div>
  <div class="header-right">
    <button class="admin-btn" id="adminToggle" onclick="openAdminFlow()">⚙ Admin</button>
  </div>
</header>

<!-- HERO -->
<section class="hero">
  <h1>A Repository of<br/>Philosophical Inquiry</h1>
  <p>Journals, essays, lecture notes and academic works spanning the breadth of philosophical thought.</p>
  <div class="hero-stats">
    <div class="stat">
      <span class="stat-num" id="totalCount">0</span>
      <span class="stat-label">Works archived</span>
    </div>
    <div class="stat">
      <span class="stat-num" id="catCount">0</span>
      <span class="stat-label">Categories</span>
    </div>
  </div>
</section>

<!-- SEARCH + FILTER -->
<div class="controls">
  <div class="search-wrap">
    <span class="search-icon">◎</span>
    <input type="text" id="searchInput" placeholder="Search by title, description or tag…" oninput="renderWorks()" />
  </div>
  <div class="cats" id="catPills"></div>
</div>

<!-- MAIN -->
<main>
  <div class="results-label" id="resultsLabel"></div>
  <div class="works-grid" id="worksGrid"></div>
</main>

<footer>
  OladojaPhilosophy &mdash; Academic Repository &mdash; All works &copy; their respective authors
</footer>

<!-- ══ PASSWORD MODAL ══ -->
<div class="overlay" id="pwOverlay">
  <div class="modal" id="pwModal">
    <button class="modal-close" onclick="closeOverlay('pwOverlay')">✕</button>
    <div class="modal-title">Admin Access</div>
    <div id="pwMsg" class="msg"></div>
    <div class="form-group">
      <label class="form-label">Password</label>
      <input type="password" class="form-input" id="pwInput" placeholder="Enter admin password" onkeydown="if(event.key==='Enter')checkPassword()" />
    </div>
    <button class="submit-btn" onclick="checkPassword()">Enter</button>
  </div>
</div>

<!-- ══ ADMIN MODAL ══ -->
<div class="overlay" id="adminOverlay">
  <div class="modal">
    <button class="modal-close" onclick="closeOverlay('adminOverlay'); logoutAdmin()">✕</button>
    <div class="modal-title">Add New Work</div>
    <div class="modal-sub">Fill in the details and paste the Google Drive shareable link for the file.</div>

    <div id="adminMsg" class="msg"></div>

    <div class="form-group">
      <label class="form-label">Title *</label>
      <input type="text" class="form-input" id="f_title" placeholder="Full title of the work" />
    </div>

    <div class="form-group">
      <label class="form-label">Category *</label>
      <select class="form-select" id="f_cat">
        <option value="metaphysics">Metaphysics</option>
        <option value="epistemology">Epistemology</option>
        <option value="ethics">Ethics &amp; Moral Philosophy</option>
        <option value="logic">Logic &amp; Philosophy of Mind</option>
        <option value="political">Political Philosophy</option>
        <option value="aesthetics">Aesthetics</option>
        <option value="phenomenology">Phenomenology</option>
        <option value="analytic">Analytic Philosophy</option>
        <option value="continental">Continental Philosophy</option>
        <option value="history">History of Philosophy</option>
        <option value="lecture">Lecture Notes</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label">Work Type</label>
      <select class="form-select" id="f_type">
        <option>Journal Article</option>
        <option>Essay</option>
        <option>Thesis</option>
        <option>Lecture Notes</option>
        <option>Book Chapter</option>
        <option>Conference Paper</option>
        <option>Other</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label">Description / Abstract</label>
      <textarea class="form-textarea" id="f_desc" placeholder="Brief description or abstract of the work…"></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">Tags (comma-separated)</label>
      <input type="text" class="form-input" id="f_tags" placeholder="e.g. Kant, free will, moral law" />
    </div>

    <div class="form-group">
      <label class="form-label">Google Drive Link *</label>
      <input type="url" class="form-input" id="f_link" placeholder="https://drive.google.com/file/d/…" />
      <div class="form-hint">Upload to Google Drive → right-click → Share → Copy link → paste here</div>
    </div>

    <div class="form-group">
      <label class="form-label">File Format</label>
      <select class="form-select" id="f_format">
        <option>PDF</option>
        <option>DOCX</option>
        <option>DOC</option>
        <option>TXT</option>
        <option>Other</option>
      </select>
    </div>

    <button class="submit-btn" onclick="addWork()">Archive This Work</button>
  </div>
</div>

<script>
// ══════════════════════════════════════════
//  CONFIGURATION — change password here
// ══════════════════════════════════════════
const ADMIN_PASSWORD = "oladoja2025"; // ← Change this to your preferred password

// ══════════════════════════════════════════
//  WORKS DATA
//  To add a work, Claude pastes a new object into this array.
// ══════════════════════════════════════════
const WORKS = [
  {
    id: 1,
    title: "Complementary Dualism as a Foundation for African Democracy",
    category: "political",
    type: "Essay",
    description: "This long essay explores the idea of Complementary Dualism as a foundation for African Democracy. By examining the principles of harmony, balance, and interconnectedness inherent in Complementary Dualism, this work argues that the indigenous African philosophical framework offers a unique and inclusive approach to the Democratic political system in Africa.",
    tags: ["African Philosophy", "Sophie Oluwole", "Dualism", "Democracy", "Political Philosophy"],
    format: "PDF",
    date: "2026-02-22",
    link: "https://drive.google.com/file/d/1s_uFqHRemIi4dP06GyoR_juGQaajZVW4/view?usp=drivesdk"
  }
];

// ══════════════════════════════════════════
//  CATEGORIES
// ══════════════════════════════════════════
const CATEGORIES = [
  { id: "all",          label: "All",               icon: "≡" },
  { id: "metaphysics",  label: "Metaphysics",        icon: "◈" },
  { id: "epistemology", label: "Epistemology",       icon: "◉" },
  { id: "ethics",       label: "Ethics",             icon: "◎" },
  { id: "logic",        label: "Logic & Mind",       icon: "◇" },
  { id: "political",    label: "Political",          icon: "◆" },
  { id: "aesthetics",   label: "Aesthetics",         icon: "○" },
  { id: "phenomenology",label: "Phenomenology",      icon: "◐" },
  { id: "analytic",     label: "Analytic",           icon: "●" },
  { id: "continental",  label: "Continental",        icon: "◑" },
  { id: "history",      label: "History",            icon: "◒" },
  { id: "lecture",      label: "Lecture Notes",      icon: "▷" },
  { id: "other",        label: "Other",              icon: "◌" },
];

// ══════════════════════════════════════════
//  STATE
// ══════════════════════════════════════════
let activeCategory = "all";
let isAdmin = false;
let localWorks = [...WORKS]; // runtime additions go here

// ══════════════════════════════════════════
//  INIT
// ══════════════════════════════════════════
document.addEventListener("DOMContentLoaded", () => {
  buildCatPills();
  renderWorks();
  updateStats();
});

function buildCatPills() {
  const container = document.getElementById("catPills");
  CATEGORIES.forEach(c => {
    const btn = document.createElement("button");
    btn.className = "cat-pill" + (c.id === "all" ? " active" : "");
    btn.textContent = c.label;
    btn.dataset.id = c.id;
    btn.onclick = () => {
      activeCategory = c.id;
      document.querySelectorAll(".cat-pill").forEach(p => p.classList.remove("active"));
      btn.classList.add("active");
      renderWorks();
    };
    container.appendChild(btn);
  });
}

function updateStats() {
  document.getElementById("totalCount").textContent = localWorks.length;
  const usedCats = new Set(localWorks.map(w => w.category));
  document.getElementById("catCount").textContent = usedCats.size;
}

// ══════════════════════════════════════════
//  RENDER WORKS
// ══════════════════════════════════════════
function renderWorks() {
  const query = document.getElementById("searchInput").value.toLowerCase().trim();
  const grid = document.getElementById("worksGrid");
  grid.innerHTML = "";

  const filtered = localWorks.filter(w => {
    const matchCat = activeCategory === "all" || w.category === activeCategory;
    const matchQ = !query ||
      w.title.toLowerCase().includes(query) ||
      (w.description || "").toLowerCase().includes(query) ||
      (w.tags || []).some(t => t.toLowerCase().includes(query));
    return matchCat && matchQ;
  });

  document.getElementById("resultsLabel").textContent =
    filtered.length + " work" + (filtered.length !== 1 ? "s" : "") + " found";

  if (filtered.length === 0) {
    grid.innerHTML = `<div class="empty">
      <div class="empty-icon">◌</div>
      <div class="empty-text">No works match your search or filter.</div>
    </div>`;
    return;
  }

  filtered.forEach((w, i) => {
    const cat = CATEGORIES.find(c => c.id === w.category) || CATEGORIES[CATEGORIES.length - 1];
    const card = document.createElement("div");
    card.className = "work-card";
    card.style.animationDelay = (i * 0.04) + "s";

    const tags = (w.tags || []).slice(0, 3).map(t => `<span class="tag">${t}</span>`).join("");
    const driveLink = convertDriveLink(w.link);

    card.innerHTML = `
      <div class="card-top">
        <div class="badges">
          <span class="badge badge-type">${w.type}</span>
          <span class="badge badge-file">${w.format}</span>
        </div>
        <span class="card-date">${formatDate(w.date)}</span>
      </div>
      <div class="card-title">${w.title}</div>
      ${w.description ? `<div class="card-desc">${w.description}</div>` : ""}
      ${tags ? `<div class="card-tags">${tags}</div>` : ""}
      <div class="card-footer">
        <div class="card-cat">${cat.icon} ${cat.label}</div>
        <a class="download-btn" href="${driveLink}" target="_blank" rel="noopener">↓ Download</a>
      </div>
    `;
    grid.appendChild(card);
  });
}

// Convert Google Drive share link to direct download link
function convertDriveLink(url) {
  if (!url || url === "#") return "#";
  // handle /file/d/ID/view → direct download
  const match = url.match(/\/d\/([a-zA-Z0-9_-]+)/);
  if (match) return `https://drive.google.com/uc?export=download&id=${match[1]}`;
  return url;
}

function formatDate(str) {
  if (!str) return "";
  const d = new Date(str);
  return d.toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" });
}

// ══════════════════════════════════════════
//  ADMIN FLOW
// ══════════════════════════════════════════
function openAdminFlow() {
  if (isAdmin) {
    openOverlay("adminOverlay");
  } else {
    document.getElementById("pwInput").value = "";
    showMsg("pwMsg", "", "");
    openOverlay("pwOverlay");
    setTimeout(() => document.getElementById("pwInput").focus(), 200);
  }
}

function checkPassword() {
  const val = document.getElementById("pwInput").value;
  if (val === ADMIN_PASSWORD) {
    isAdmin = true;
    closeOverlay("pwOverlay");
    document.getElementById("adminToggle").classList.add("active");
    clearAdminForm();
    openOverlay("adminOverlay");
  } else {
    showMsg("pwMsg", "Incorrect password. Please try again.", "error");
    document.getElementById("pwInput").value = "";
    document.getElementById("pwInput").focus();
  }
}

function logoutAdmin() {
  isAdmin = false;
  document.getElementById("adminToggle").classList.remove("active");
}

function addWork() {
  const title = document.getElementById("f_title").value.trim();
  const cat   = document.getElementById("f_cat").value;
  const type  = document.getElementById("f_type").value;
  const desc  = document.getElementById("f_desc").value.trim();
  const tags  = document.getElementById("f_tags").value.split(",").map(t => t.trim()).filter(Boolean);
  const link  = document.getElementById("f_link").value.trim();
  const fmt   = document.getElementById("f_format").value;

  if (!title) { showMsg("adminMsg", "Please enter a title.", "error"); return; }
  if (!link)  { showMsg("adminMsg", "Please paste the Google Drive link.", "error"); return; }

  const newWork = {
    id: Date.now(),
    title, category: cat, type, description: desc,
    tags, format: fmt, date: new Date().toISOString().slice(0,10), link
  };

  localWorks.unshift(newWork);
  updateStats();
  renderWorks();
  showMsg("adminMsg", "✓ Work archived successfully!", "success");
  setTimeout(() => {
    closeOverlay("adminOverlay");
    logoutAdmin();
    clearAdminForm();
  }, 1600);
}

function clearAdminForm() {
  ["f_title","f_desc","f_tags","f_link"].forEach(id => document.getElementById(id).value = "");
  document.getElementById("f_cat").selectedIndex = 0;
  document.getElementById("f_type").selectedIndex = 0;
  document.getElementById("f_format").selectedIndex = 0;
  showMsg("adminMsg","","");
}

// ══════════════════════════════════════════
//  HELPERS
// ══════════════════════════════════════════
function openOverlay(id) { document.getElementById(id).classList.add("open"); }
function closeOverlay(id) { document.getElementById(id).classList.remove("open"); }

function showMsg(id, text, type) {
  const el = document.getElementById(id);
  el.textContent = text;
  el.className = "msg" + (type ? " " + type : "");
}

// Close overlay on backdrop click
document.querySelectorAll(".overlay").forEach(ov => {
  ov.addEventListener("click", e => {
    if (e.target === ov) {
      ov.classList.remove("open");
      if (ov.id === "adminOverlay") logoutAdmin();
    }
  });
});
</script>
</body>
</html>
